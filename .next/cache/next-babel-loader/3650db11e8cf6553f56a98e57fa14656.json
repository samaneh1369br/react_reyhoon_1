{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\s.hajiramezani\\\\Documents\\\\samaneh-practice\\\\react_reyhoon_page_2\\\\components\\\\Banner_form\\\\Banner_form.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n// onBlur={() => this.setState({ showSuggest: false })} \nimport SearchInput, { createFilter } from 'react-search-input';\nimport cx from 'classnames';\nimport \"./Banner_form.css\";\nimport SvgSearch from \"../Svg_search/Svg_search\";\nimport ReactDOM from \"react-dom\";\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getCities\", async () => {\n      const respond = await fetch('https://stage.reyhoon.com/public-api/v1/cities', {\n        method: \"GET\"\n      });\n\n      if (respond.ok) {\n        const data = await respond.json();\n        this.setState({\n          allCityies: data.cities\n        });\n      } else {\n        console.error(\"https_code\" + respond.status);\n      }\n    });\n\n    _defineProperty(this, \"regionGet\", e => {\n      const regionTyped = e.target.value;\n      if (regionTyped.length >= 2) this.setState({\n        region: regionTyped\n      }, () => {\n        async () => {\n          console.log(`https://stage.reyhoon.com/location/query?query=${this.state.region}&city=${city}`);\n        };\n      });\n    });\n\n    _defineProperty(this, \"submit\", e => {\n      e.preventDefault();\n      e.target.querySelector(\"input[id='txt1']\").value = this.state.city;\n      e.target.querySelector(\"input[id='txt1']\").value && e.target.querySelector(\"input[id='txt2']\").value ? this.setState({\n        region: e.target.querySelector(\"input[id='txt2']\").value\n      }) : this.setState({\n        city: \"هر دو ورودی را کامل کنید\",\n        region: \"\"\n      });\n    });\n\n    _defineProperty(this, \"searchUpdated\", term => {\n      let temp = term.target.value;\n      if (temp.length >= 2) this.setState({\n        searchTerm: temp\n      });\n    });\n\n    _defineProperty(this, \"citySuggestedShow\", () => {\n      this.setState({\n        showSuggest: true\n      });\n    });\n\n    _defineProperty(this, \"setCity\", citySelected => {\n      const node = ReactDOM.findDOMNode(this); //    document.querySelector(\"input[id='txt1']\").value=citySelected;\n\n      node.querySelector(\"input[id='txt2']\").focus();\n      this.setState({\n        city: citySelected,\n        showSuggest: false\n      });\n    });\n\n    this.submit = this.submit.bind(this); // this.cityGet=this.cityGet.bind(this);\n\n    this.searchUpdated = this.searchUpdated.bind(this);\n    this.suggestedCittyBlock = React.createRef();\n    this.state = {\n      city: \"\",\n      region: \"\",\n      allCityies: [],\n      searchTerm: '',\n      sugestionCity: '',\n      showSuggest: false\n    };\n  }\n\n  async componentDidMount() {\n    this.getCities();\n  }\n\n  render() {\n    const filteredCities = this.state.allCityies.filter(createFilter(this.state.searchTerm, 'name')); //  console.log(filteredCities);\n\n    return __jsx(\"section\", {\n      style: {\n        marginBottom: '30px',\n        marginTop: \"45px !important\"\n      },\n      className: \"header-form-section margin-v-60\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"\\u0628\\u0631\\u0627\\u06CC \\u062F\\u06CC\\u062F\\u0646 \\u0644\\u06CC\\u0633\\u062A \\u0631\\u0633\\u062A\\u0648\\u0631\\u0627\\u0646\\u200C\\u0647\\u0627 \\u0648 \\u0641\\u0633\\u062A\\u200C\\u0641\\u0648\\u062F\\u200C\\u0647\\u0627\\u06CC\\u06CC \\u06A9\\u0647 \\u0628\\u0647 \\u0634\\u0645\\u0627 \\u0633\\u0631\\u0648\\u06CC\\u0633 \\u0645\\u06CC\\u200C\\u062F\\u0647\\u0646\\u062F\\u060C \\u0645\\u0646\\u0637\\u0642\\u0647 \\u062E\\u0648\\u062F \\u0631\\u0627 \\u0648\\u0627\\u0631\\u062F \\u06A9\\u0646\\u06CC\\u062F.\"), __jsx(\"form\", {\n      onSubmit: this.submit,\n      className: \"header-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      value: this.state.city,\n      id: \"txt1\",\n      type: \"text\",\n      onFocus: () => this.citySuggestedShow(),\n      onChange: e => this.searchUpdated(e),\n      placeholder: \"\\u0627\\u0646\\u062A\\u062E\\u0627\\u0628 \\u06A9\\u0646\\u06CC\\u062F\",\n      autocomplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), __jsx(\"ul\", {\n      className: cx('citySuggested', {\n        'showCitySuggested': this.state.showSuggest\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"( \", this.state.allCityies.length, \") \\u062A\\u062D\\u062A \\u067E\\u0648\\u0634\\u0634\"), filteredCities.map((city, key) => __jsx(\"li\", {\n      onClick: () => this.setCity(city.name),\n      key: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, city.name))), __jsx(\"div\", {\n      className: \"child-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      className: \"child-2-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"\\xA9\"), __jsx(\"input\", {\n      className: \"child-2-input\",\n      type: \"text\",\n      id: \"txt2\",\n      onChange: this.regionGet,\n      placeholder: \"\\u0645\\u062B\\u0644\\u0627 \\u0646\\u06CC\\u0627\\u0648\\u0631\\u0627\\u0646\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), __jsx(\"button\", {\n      className: \"child-3\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, __jsx(SvgSearch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }))), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.city, \" . \", this.state.region));\n  }\n\n}\n\nexport default Form; // onBlur={() => this.setState({ showSuggest: false })}","map":{"version":3,"sources":["C:\\Users\\s.hajiramezani\\Documents\\samaneh-practice\\react_reyhoon_page_2\\components\\Banner_form\\Banner_form.js"],"names":["SearchInput","createFilter","cx","SvgSearch","ReactDOM","Form","React","Component","constructor","props","respond","fetch","method","ok","data","json","setState","allCityies","cities","console","error","status","e","regionTyped","target","value","length","region","log","state","city","preventDefault","querySelector","term","temp","searchTerm","showSuggest","citySelected","node","findDOMNode","focus","submit","bind","searchUpdated","suggestedCittyBlock","createRef","sugestionCity","componentDidMount","getCities","render","filteredCities","filter","marginBottom","marginTop","citySuggestedShow","map","key","setCity","name","regionGet"],"mappings":"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","sourcesContent":["\r\n\r\n\r\n// onBlur={() => this.setState({ showSuggest: false })} \r\n\r\n\r\nimport SearchInput, {createFilter} from 'react-search-input';\r\nimport cx from 'classnames';\r\nimport \"./Banner_form.css\"\r\nimport SvgSearch from \"../Svg_search/Svg_search\"\r\nimport ReactDOM from \"react-dom\";\r\n\r\nclass Form  extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.submit=this.submit.bind(this);\r\n        // this.cityGet=this.cityGet.bind(this);\r\n        this.searchUpdated = this.searchUpdated.bind(this);\r\n        this.suggestedCittyBlock=React.createRef();\r\n        this.state={\r\n         city:\"\",\r\n         region:\"\",\r\n         allCityies:[],\r\n         searchTerm :'',\r\n         sugestionCity:'',\r\n         showSuggest: false,\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n      this.getCities();\r\n     \r\n    }\r\n   \r\n\r\n    getCities = async () => {\r\n        const respond =  await fetch('https://stage.reyhoon.com/public-api/v1/cities',{method:\"GET\"});\r\n        if (respond.ok) {\r\n            const data = await respond.json();\r\n            \r\n            this.setState({allCityies:data.cities})\r\n        }\r\n        else {\r\n            console.error(\"https_code\"+respond.status)\r\n        }\r\n       \r\n            \r\n    }\r\n\r\n    regionGet=(e)=>{\r\n        const regionTyped=e.target.value;\r\n        if (regionTyped.length>=2)\r\n         this.setState({\r\n            region:regionTyped\r\n        },()=>{\r\n         async ()=>{\r\n             console.log(`https://stage.reyhoon.com/location/query?query=${this.state.region}&city=${city}`)\r\n         }\r\n        }\r\n        )\r\n    }\r\n    submit=(e)=>{\r\n        e.preventDefault(); \r\n        e.target.querySelector(\"input[id='txt1']\").value=this.state.city;\r\n      ((e.target.querySelector(\"input[id='txt1']\").value)&&(e.target.querySelector(\"input[id='txt2']\").value))\r\n        ? this.setState({\r\n            \r\n            region:e.target.querySelector(\"input[id='txt2']\").value\r\n        })\r\n        : \r\n        this.setState({\r\n            city:\"هر دو ورودی را کامل کنید\",\r\n            region:\"\" \r\n        })\r\n    }\r\n    searchUpdated=(term)=>{\r\n        let temp=term.target.value;\r\n        if (temp.length>=2)\r\n        \r\n       this.setState({searchTerm:temp});        \r\n    };\r\n    citySuggestedShow=()=>{\r\n        this.setState({\r\n            showSuggest: true,\r\n        })\r\n        }\r\n    setCity=(citySelected)=>{\r\n       const node = ReactDOM.findDOMNode(this);\r\n    //    document.querySelector(\"input[id='txt1']\").value=citySelected;\r\n       node.querySelector(\"input[id='txt2']\").focus();\r\n      this.setState({\r\n          city:citySelected,\r\n          showSuggest: false\r\n      })\r\n\r\n        }    \r\n    render(){\r\n      \r\n          const filteredCities =this.state.allCityies.filter(createFilter(this.state.searchTerm,'name'));\r\n        //  console.log(filteredCities);\r\n       return(   \r\n            <section  style={{marginBottom: '30px', marginTop:\"45px !important\"}} className=\"header-form-section margin-v-60\" >\r\n                    <p>برای دیدن لیست رستوران‌ها و فست‌فود‌هایی که به شما سرویس می‌دهند، منطقه خود را وارد کنید.</p>\r\n                    <form onSubmit={this.submit}  className=\"header-form\">\r\n                        <input  \r\n                        value={this.state.city}\r\n                            id=\"txt1\"\r\n                            type=\"text\" \r\n                            onFocus={()=>this.citySuggestedShow()}  \r\n                            onChange={(e)=>this.searchUpdated(e)} \r\n                            placeholder=\"انتخاب کنید\"\r\n                            autocomplete=\"off\" \r\n                        />\r\n                           \r\n                         \r\n                         <ul className={cx('citySuggested', {'showCitySuggested': this.state.showSuggest})}>\r\n                             <p>( {this.state.allCityies.length}) تحت پوشش</p>\r\n                              {filteredCities.map((city, key)=><li onClick={()=>this.setCity(city.name)}  key={key}>{city.name}</li>)}\r\n                         </ul>  \r\n                        <div className=\"child-2\">\r\n                            <span className=\"child-2-icon\">&copy;</span>\r\n                            <input className=\"child-2-input\" type=\"text\" id=\"txt2\" onChange={this.regionGet} placeholder=\"مثلا نیاوران\"/>\r\n                        </div>\r\n                        <button className=\"child-3\" type=\"submit\">\r\n                            <SvgSearch/>\r\n                        </button>\r\n                        \r\n                    </form>\r\n                    <div >\r\n                        {this.state.city} . { this.state.region}\r\n                    </div>\r\n\r\n                </section>\r\n           \r\n        )\r\n    }\r\n}\r\nexport default Form;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// onBlur={() => this.setState({ showSuggest: false })} \r\n"]},"metadata":{},"sourceType":"module"}